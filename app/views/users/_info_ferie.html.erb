<div class="col-md-8" id="holidayInfo">
  <div class="col-md-16">
    <h2>Ferie del Dipendente</h2>
    <% if current_user.holidays.present? %>
<%= form_with(model: current_user, url: update_holidays_user_path(current_user), method: :post, local: true, id: "holidays_form") do |f| %>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Giorni Presi</th>
        <th scope="col">Giorni Rimasti</th>
      </tr>
    </thead>
    <tbody>
      <% current_user.holidays.each_with_index do |holiday, index| %>
        <tr>
          <td>
            <%= f.number_field :holidays_taken, value: holiday.taken, name: "holidays[#{index}][taken]", class: "form-control holiday-input" %>
          </td>
          <td>
            <%= f.number_field :holidays_left, value: holiday.left, name: "holidays[#{index}][left]", class: "form-control holiday-input" %>
          </td>
          <input type="hidden" name="holidays[<%= index %>][id]" value="<%= holiday.id %>">
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= f.submit 'Aggiorna Ferie', class: 'btn btn-primary', disabled: true, id: "submit_button" %>
<% end %>


    <% else %>
      <p>Nessuna informazione sulle ferie disponibile.</p>
    <% end %>
  </div>
</div>
<<<<<<< HEAD
<script>
  function enableSaveLeaveButton() {
    var daysTaken = document.getElementById('holiday_taken').value;
    var daysLeft = document.getElementById('holiday_left').value;
    var saveButton = document.getElementById('saveLeaveButton');

    // Abilita il bottone solo se entrambi i campi hanno un valore
    if (daysTaken !== "" && daysLeft !== "") {
      saveButton.disabled = false;
    } else {
      saveButton.disabled = true;
    }
  }

  function saveLeaveDays() {
    var saveButton = document.getElementById('saveLeaveButton');

    // Disabilita il bottone dopo che è stato cliccato
    saveButton.disabled = true;

    // Qui puoi aggiungere altro codice per salvare i dati tramite Ajax, se necessario
  }

  document.addEventListener('DOMContentLoaded', function() {
    var inputs = document.querySelectorAll('#leaveInfo input[type="number"]');
    inputs.forEach(function(input) {
      input.addEventListener('input', enableSaveLeaveButton);
    });
  });
</script>
=======

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const form = document.getElementById('holidays_form');
    const inputs = document.querySelectorAll('.holiday-input');
    const submitButton = document.getElementById('submit_button');
    
    let originalValues = {};

    // Salva i valori iniziali degli input
    inputs.forEach(input => {
      originalValues[input.name] = input.value;
    });

    // Funzione per controllare se ci sono state modifiche
    function checkForChanges() {
      let isChanged = false;

      inputs.forEach(input => {
        if (input.value !== originalValues[input.name]) {
          isChanged = true;
        }
      });

      submitButton.disabled = !isChanged;
    }

    // Ascolta gli eventi di modifica degli input
    inputs.forEach(input => {
      input.addEventListener('input', checkForChanges);
    });

    // Disabilita il pulsante dopo l'invio del form
    form.addEventListener('submit', function() {
      submitButton.disabled = true;
    });
  });
</script>

>>>>>>> 88f956b (aggiunta funzionalità ferie dipendente, dirigente ed admin. (seed da rivedere per le ferie))
