<div class="col-md-8" id="salaryInfo">
  <h2>Informazioni Stipendio</h2>

  <% if user.salaires.present? %>
    <select id="monthSelect" class="form-control mb-3" onchange="showSalaryInfo()">
      <option value="" disabled selected>Seleziona un mese</option>
      <% user.salaires.each do |salaire| %>
        <option value="<%= salaire.date.strftime('%Y-%m') %>"><%= salaire.date.strftime('%B %Y') %></option>
      <% end %>
    </select>
    <p><strong>Stipendio:</strong> <span id="salaryAmount">Seleziona un mese per visualizzare lo stipendio</span></p>
  <% else %>
    <p>Nessuna informazione sullo stipendio disponibile.</p>
  <% end %>
</div>

<% if @user.present? && @user.salaires.any? %>
  <script>
    const salaries = <%= @user.salaires.map { |salaire| { date: salaire.date.strftime('%Y-%m'), value: salaire.value } }.to_json.html_safe %>;

    function showSalaryInfo() {
      const selectedDate = document.getElementById('monthSelect').value;
      const selectedSalary = salaries.find(salary => salary.date === selectedDate);

      if (selectedSalary) {
        document.getElementById('salaryAmount').textContent = selectedSalary.value + ' â‚¬';
      } else {
        document.getElementById('salaryAmount').textContent = 'Nessuno stipendio disponibile per questo mese';
      }
    }
  </script>
<% end %>
